<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Kod Etiketi Oluştur</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f4f4f4;
            font-family: Arial, sans-serif;
        }

        .form-container {
            width: 300px;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .form-container h2 {
            text-align: center;
            margin-bottom: 15px;
            color: #333;
        }

        input,
        select {
            width: 100%;
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
        }

        button {
            width: 100%;
            padding: 10px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 10px;
        }

        button:hover {
            background-color: #218838;
        }

        /* Etiket Alanı */
        .label-container {
            width: 60mm; /* Varsayılan etiket genişliği: 60mm */
            height: 40mm; /* Varsayılan etiket yüksekliği: 40mm */
            background-color: white;
            display: flex; /* Flexbox kullanıyoruz */
            flex-direction: row; /* Öğeleri yan yana diz */
            align-items: center; /* Öğeleri dikeyde ortala */
            border: 1px solid black;
            padding: 1.5mm; /* Kenarlardan biraz daha boşluk bırakalım */
            box-sizing: border-box; /* Padding dahil genişlik ve yükseklik */
            overflow: hidden; /* Taşmaları gizle */
        }
        
        /* Özel boyut CSS sınıfları */
        .paper-a4 {
            width: 210mm;
            height: 297mm;
            flex-direction: row;
            flex-wrap: wrap;
            align-items: flex-start;
            justify-content: flex-start;
            padding: 10mm;
            gap: 5mm;
        }
        
        .paper-100x100 {
            width: 100mm;
            height: 100mm;
        }
        
        /* Çoklu etiket yerleşimi için */
        .multi-label-container {
            display: flex;
            flex-wrap: wrap;
            gap: 5mm;
            justify-content: flex-start;
            align-items: flex-start;
            width: 100%;
            height: 100%;
        }
        
        .label-item {
            width: 60mm;
            height: 40mm;
            border: 1px solid #ddd;
            background-color: white;
            box-sizing: border-box;
            display: flex;
            flex-direction: row;
            align-items: center;
            padding: 1.5mm;
            overflow: hidden;
        }

        /* QR Kod ve Altındaki Barkod Alanı */
        .qr-and-barcode-area {
            display: flex;
            flex-direction: column; /* İçindeki öğeleri (QR ve barkod) alt alta diz */
            align-items: center; /* İçindeki öğeleri yatayda ortala */
            flex-shrink: 0; /* Küçülmesini engelle */
            margin-right: 3mm; /* Sağdaki yazı alanıyla arasını aç */
             width: 100px; /* QR genişliği kadar bir genişlik verelim */
        }


        /* QR Kod Boyutu */
        .qr-area {
            width: 100px; /* QR kod genişliği */
            height: 100px; /* QR kod yüksekliği */
            display: flex; /* İçindeki görseli ortalamak için */
            justify-content: center;
            align-items: center;
             margin-bottom: 1mm; /* QR ile altındaki barkod arasına boşluk */
        }

        .qr-area img {
            max-width: 100%; /* Alanın genişliğini aşma */
            max-height: 100%; /* Alanın yüksekliğini aşma */
             width: 100%; /* Alanı tam doldur */
             height: 100%; /* Alanı tam doldur */
            object-fit: contain; /* Görselin oranını bozmadan sığdır */
        }

        /* QR Altındaki Barkod Yazısı */
        .barcode-text-under-qr {
            font-size: 14px; /* Küçük puntoda barkod numarası */
            text-align: center; /* Ortala */
            word-break: break-all; /* Gerekirse kelimeyi kırarak sığdır */
            max-width: 100%; /* Kendi alanından (100px) taşma */
            overflow: hidden;
            font-weight: bold; /* Barkod numarasını da belirgin yapalım */
        }


        /* Ürün Bilgisi Alanı (Sağ Taraf) */
        .text-area {
            flex-grow: 1; /* Kalan alanı kapla */
            height: 100%; /* Yüksekliği etiket yüksekliği kadar yap */
            display: flex;
            flex-direction: column; /* Yazıları alt alta sırala */
            justify-content: center; /* Yazıları dikeyde ortala */
            text-align: left; /* Yazıları sola yasla */
            font-size: 17px; /* Yazı boyutunu ayarla */
            overflow: hidden; /* Taşmaları gizle */
            padding-right: 1.5mm; /* Sağdan hafif boşluk */
        }

        .product-info {
             /* flex column zaten text-area'da ayarlı, bu div sadece içerik sarıcı */
            word-break: break-word; /* Uzun kelimeleri kırarak sığdır */
        }

        .product-info div {
            /* Her bir bilgi satırı için (Model, Renk, Beden) */
            margin-bottom: 7px; /* Satır aralarını aç (bir tık daha fazla) */
            line-height: 1.2; /* Satır içindeki yazıların aralığı */
        }

        .product-info div:last-child {
            margin-bottom: 0; /* Son satırın altına boşluk ekleme */
        }


        .product-info .label {
            font-weight: bold; /* Başlıkları kalın yap (Model:, Renk:, Beden:) */
            margin-right: 3px; /* Başlık ile değer arasına boşluk */
        }

         .product-info .value {
             font-weight: normal; /* Değerleri normal yap */
         }


        .nav-buttons {
            display: flex;
            justify-content: space-between;
            width: 300px;
            margin-top: 20px;
        }

        .nav-buttons a {
            text-decoration: none;
            color: white;
            background-color: #007bff;
            padding: 10px;
            border-radius: 4px;
            font-size: 16px;
            text-align: center;
            transition: background-color 0.3s;
            width: 48%;
        }

        .nav-buttons a:hover {
            background-color: #0056b3;
        }

        /* Yazdırma Ayarları */
        @media print {
            @page {
                /* Yazdırma boyutu JavaScript ile dinamik olarak değiştirilecek */
                size: auto;
                margin: 0;
            }

            body {
                display: block; /* Yazdırırken flex yerine block daha uygun olabilir */
                /* Genişlik ve yükseklik JavaScript ile dinamik olarak değiştirilecek */
                margin: 0;
                background-color: white;
            }

            .form-container,
            .nav-buttons,
            button {
                display: none; /* Form ve butonları gizle */
            }

            .label-container {
                width: 60mm; /* Yazdırma etiket genişliği */
                height: 40mm; /* Yazdırma etiket yüksekliği */
                border: none; /* Yazdırırken çerçeve olmasın */
                padding: 0; /* Yazdırmada padding olmasın */
                margin: 0;
                box-sizing: border-box;
                 display: flex;
                 flex-direction: row;
                 align-items: center;
                 justify-content: space-between; /* İçeriği iki yana yasla */
            }

             .qr-and-barcode-area {
                 display: flex;
                 flex-direction: column;
                 align-items: center;
                 flex-shrink: 0;
                 margin-right: 3mm;
                 width: 100px; /* QR genişliği kadar bir genişlik verelim */
                 padding: 0; /* Yazdırmada padding olmasın */
             }

             .qr-area {
                width: 100px; /* Yazdırmada da 100px QR */
                height: 100px;
                 margin-bottom: 1mm;
                 padding: 0; /* Yazdırmada padding olmasın */
            }

             .qr-area img {
                 width: 100%;
                 height: 100%;
                 object-fit: contain;
             }

             .barcode-text-under-qr {
                 font-size: 9px; /* Yazdırmada biraz daha küçük font daha iyi olabilir */
                 text-align: center;
                 word-break: break-all;
                 max-width: 100%;
                 overflow: hidden;
                 font-weight: bold;
             }


            .text-area {
                flex-grow: 1;
                height: 100%;
                padding: 0 1.5mm 0 0; /* Sağdan boşluk */
                box-sizing: border-box;
                display: flex;
                flex-direction: column;
                justify-content: center;
                text-align: left;
                font-size: 11px; /* Yazdırmada biraz daha küçük font */
            }

             .product-info {
                 word-break: break-word;
             }

             .product-info div {
                 margin-bottom: 3px; /* Yazdırmada satır araları (ekrandan az) */
                 line-height: 1.2;
             }
              .product-info div:last-child {
                margin-bottom: 0;
            }

             .product-info .label {
                 font-weight: bold;
                 margin-right: 3px;
             }

              .product-info .value {
                 font-weight: normal;
             }
        }
    </style>
</head>

<body>

    <div class="form-container no-print">
        <h2>Etiket Bilgileri</h2>
        <input type="text" id="barcode-input" placeholder="Barkod" required>
        <input type="text" id="model-input" placeholder="Model Kodu" required>
        <input type="text" id="color-input" placeholder="Renk" required>
        <input type="text" id="size-input" placeholder="Beden" required>
        
        <h3>Etiket Ayarları</h3>
        <select id="paper-type" onchange="updateCustomFields()">
            <option value="custom">Özel Boyut</option>
            <option value="60x40" selected>Etiket - 60x40mm</option>
            <option value="100x100">Etiket - 100x100mm</option>
            <option value="a4">A4 Kağıt</option>
        </select>
        
        <div id="custom-size-fields">
            <input type="number" id="width-input" placeholder="Genişlik (mm)" value="60" onchange="updateLabelSize()">
            <input type="number" id="height-input" placeholder="Yükseklik (mm)" value="40" onchange="updateLabelSize()">
        </div>
        
        <div id="multi-label-settings" style="display: none; margin-top: 10px;">
            <h3>Çoklu Etiket Ayarları</h3>
            <div style="display: flex; gap: 10px;">
                <div style="flex: 1;">
                    <label for="label-width">Etiket Genişliği (mm):</label>
                    <input type="number" id="label-width" value="60" onchange="calculateLabelLayout()">
                </div>
                <div style="flex: 1;">
                    <label for="label-height">Etiket Yüksekliği (mm):</label>
                    <input type="number" id="label-height" value="40" onchange="calculateLabelLayout()">
                </div>
            </div>
            <div style="display: flex; gap: 10px; margin-top: 10px;">
                <div style="flex: 1;">
                    <label for="horizontal-gap">Yatay Boşluk (mm):</label>
                    <input type="number" id="horizontal-gap" value="5" onchange="calculateLabelLayout()">
                </div>
                <div style="flex: 1;">
                    <label for="vertical-gap">Dikey Boşluk (mm):</label>
                    <input type="number" id="vertical-gap" value="5" onchange="calculateLabelLayout()">
                </div>
            </div>
            <div style="margin-top: 10px;">
                <label for="label-count">Etiket Sayısı:</label>
                <input type="number" id="label-count" value="1" min="1" max="100" onchange="updateLabelCount()">
            </div>
        </div>

        <button type="button" onclick="generateAndPrintFromForm()">Etiket Oluştur & Yazdır</button>
    </div>

    <div class="label-container" id="label">
        <div id="single-label-container">
            <div class="qr-and-barcode-area">
                 <div class="qr-area">
                     <img id="qr-code-image" src="https://via.placeholder.com/100" alt="QR Kod Placeholder"> </div>
                 <div class="barcode-text-under-qr" id="barcode-text-under-qr">
                     </div>
            </div>

            <div class="text-area">
                 <div class="product-info">
                     <div><span class="label">Model:</span> <span class="value" id="model-value"></span></div>
                     <div><span class="label">Renk:</span> <span class="value" id="color-value"></span></div>
                     <div><span class="label">Beden:</span> <span class="value" id="size-value"></span></div>
                 </div>
            </div>
        </div>
        <div id="multi-label-container" class="multi-label-container" style="display: none;">
            <!-- Çoklu etiketler buraya JavaScript ile eklenecek -->
        </div>
    </div>

    <div class="nav-buttons no-print">
        <a href="/">Ana Sayfa</a>
        <a href="/product_list">Ürün Listesi</a>
    </div>

    <script>
        // Sayfa yüklendiğinde yapılacak işlemler
        window.onload = function() {
            // Özel boyut alanlarını düzenle
            updateCustomFields();
            
            // Genişlik/Yükseklik değişikliklerini dinle
            document.getElementById('width-input').addEventListener('change', updateLabelSize);
            document.getElementById('height-input').addEventListener('change', updateLabelSize);
            
            // URL'den gelen parametreleri kontrol et
            const urlParams = new URLSearchParams(window.location.search);
            const barcode = urlParams.get('barcode');
            const model = urlParams.get('model');
            const color = urlParams.get('color');
            const size = urlParams.get('size');
            
            // Form alanlarını doldur
            if (barcode) document.getElementById('barcode-input').value = barcode;
            if (model) document.getElementById('model-input').value = model;
            if (color) document.getElementById('color-input').value = color;
            if (size) document.getElementById('size-input').value = size;
            
            // URL'de tüm gerekli bilgiler varsa otomatik yazdırma işlemini başlat
            if (barcode && model && color && size && urlParams.get('print') === 'true') {
                generateLabelAndPrint(barcode, model, color, size);
            } else if (barcode && model && color && size) {
                console.log("Otomatik yazdır çalıştı");
                // Bu eski davranış - parametreler varsa ama 'print' parametresi yoksa da otomatik yazdır
                generateLabelAndPrint(barcode, model, color, size);
            } else {
                console.log("URL'de eksik bilgi var veya hiç yok, otomatik etiket oluşturulmayacak.");
            }
        };
        
        // Kağıt türü değiştiğinde özel boyut alanlarını göster/gizle
        function updateCustomFields() {
            const paperType = document.getElementById('paper-type').value;
            const customFields = document.getElementById('custom-size-fields');
            const labelContainer = document.getElementById('label');
            const singleLabelContainer = document.getElementById('single-label-container');
            const multiLabelContainer = document.getElementById('multi-label-container');
            const multiLabelSettings = document.getElementById('multi-label-settings');
            
            // Özel boyut alanlarını göster/gizle
            customFields.style.display = paperType === 'custom' ? 'block' : 'none';
            
            // Çoklu etiket ayarlarını sadece A4 için göster
            multiLabelSettings.style.display = paperType === 'a4' ? 'block' : 'none';
            
            // Etiket modunu ayarla (tekli/çoklu)
            const isMultiLabel = paperType === 'a4';
            singleLabelContainer.style.display = isMultiLabel ? 'none' : 'flex';
            multiLabelContainer.style.display = isMultiLabel ? 'flex' : 'none';
            
            // Etikete uygun CSS sınıfı ekle/kaldır
            labelContainer.classList.remove('paper-a4', 'paper-100x100');
            
            // Seçilen kağıt türüne göre boyutları ayarla
            if (paperType === '60x40') {
                labelContainer.style.width = '60mm';
                labelContainer.style.height = '40mm';
                document.getElementById('width-input').value = '60';
                document.getElementById('height-input').value = '40';
            } else if (paperType === '100x100') {
                labelContainer.classList.add('paper-100x100');
                labelContainer.style.width = '100mm';
                labelContainer.style.height = '100mm';
                document.getElementById('width-input').value = '100';
                document.getElementById('height-input').value = '100';
            } else if (paperType === 'a4') {
                labelContainer.classList.add('paper-a4');
                labelContainer.style.width = '210mm';
                labelContainer.style.height = '297mm';
                document.getElementById('width-input').value = '210';
                document.getElementById('height-input').value = '297';
                
                // Çoklu etiket ayarlarını güncelle
                document.getElementById('label-width').value = '60';
                document.getElementById('label-height').value = '40';
                
                // Etiketleri hesapla
                calculateLabelLayout();
            } else if (paperType === 'custom') {
                // Özel boyut alanlarından değerleri al
                const width = document.getElementById('width-input').value;
                const height = document.getElementById('height-input').value;
                labelContainer.style.width = width + 'mm';
                labelContainer.style.height = height + 'mm';
            }
            
            // Yazdırma stil etiketini güncelle
            updatePrintStyles();
        }
        
        // Özel boyut alanlarında değişiklik olduğunda etiketi güncelle
        function updateLabelSize() {
            const paperType = document.getElementById('paper-type').value;
            if (paperType === 'custom') {
                const width = document.getElementById('width-input').value;
                const height = document.getElementById('height-input').value;
                const labelContainer = document.getElementById('label');
                labelContainer.style.width = width + 'mm';
                labelContainer.style.height = height + 'mm';
                
                // Yazdırma stil etiketini güncelle
                updatePrintStyles();
            }
        }
        
        // Yazdırma CSS stil etiketini dinamik olarak güncelle
        function updatePrintStyles() {
            // Mevcut stil etiketini kaldır
            const existingStyle = document.getElementById('dynamic-print-styles');
            if (existingStyle) {
                existingStyle.remove();
            }
            
            // Etiket/kağıt boyutlarını al
            let width, height;
            const paperType = document.getElementById('paper-type').value;
            
            if (paperType === 'custom') {
                width = document.getElementById('width-input').value;
                height = document.getElementById('height-input').value;
            } else if (paperType === '60x40') {
                width = 60;
                height = 40;
            } else if (paperType === '100x100') {
                width = 100;
                height = 100;
            } else if (paperType === 'a4') {
                width = 210;
                height = 297;
            }
            
            // Yeni stil etiketini oluştur
            const style = document.createElement('style');
            style.id = 'dynamic-print-styles';
            style.textContent = `
                @media print {
                    @page {
                        size: ${width}mm ${height}mm;
                        margin: 0;
                    }
                    body {
                        width: ${width}mm;
                        height: ${height}mm;
                    }
                }
            `;
            
            // Stil etiketini head'e ekle
            document.head.appendChild(style);
        }
        
        // Etiket sayısını güncelle
        function updateLabelCount() {
            calculateLabelLayout();
        }
        
        // A4 kağıtta etiket düzenini hesapla
        function calculateLabelLayout() {
            const multiLabelContainer = document.getElementById('multi-label-container');
            const labelCount = parseInt(document.getElementById('label-count').value) || 1;
            const labelWidth = parseInt(document.getElementById('label-width').value) || 60;
            const labelHeight = parseInt(document.getElementById('label-height').value) || 40;
            const hGap = parseInt(document.getElementById('horizontal-gap').value) || 5;
            const vGap = parseInt(document.getElementById('vertical-gap').value) || 5;
            
            // A4 boyutları (mm)
            const pageWidth = 210;
            const pageHeight = 297;
            const pagePadding = 10; // sayfa kenarlarından boşluk
            
            // Kullanılabilir alan
            const usableWidth = pageWidth - (2 * pagePadding);
            const usableHeight = pageHeight - (2 * pagePadding);
            
            // Bir satıra kaç etiket sığar
            const labelsPerRow = Math.floor((usableWidth + hGap) / (labelWidth + hGap));
            
            // Bir sütuna kaç etiket sığar
            const labelsPerColumn = Math.floor((usableHeight + vGap) / (labelHeight + vGap));
            
            // Bir sayfaya kaç etiket sığar
            const labelsPerPage = labelsPerRow * labelsPerColumn;
            
            // Etiketleri oluştur
            createLabelElements(labelCount, labelWidth, labelHeight, labelsPerRow, labelsPerColumn);
        }
        
        // Etiket elementlerini oluştur
        function createLabelElements(count, width, height, labelsPerRow, labelsPerColumn) {
            const multiLabelContainer = document.getElementById('multi-label-container');
            
            // Önce mevcut etiketleri temizle
            multiLabelContainer.innerHTML = '';
            
            // Etiketleri oluştur
            for (let i = 0; i < count; i++) {
                const labelItem = document.createElement('div');
                labelItem.className = 'label-item';
                labelItem.style.width = width + 'mm';
                labelItem.style.height = height + 'mm';
                
                // Etiket içeriği (tek etiketin aynısı)
                labelItem.innerHTML = `
                    <div class="qr-and-barcode-area">
                        <div class="qr-area">
                            <img class="qr-code-clone" src="https://via.placeholder.com/100" alt="QR Kod">
                        </div>
                        <div class="barcode-text-under-qr barcode-clone"></div>
                    </div>
                    <div class="text-area">
                        <div class="product-info">
                            <div><span class="label">Model:</span> <span class="value model-clone"></span></div>
                            <div><span class="label">Renk:</span> <span class="value color-clone"></span></div>
                            <div><span class="label">Beden:</span> <span class="value size-clone"></span></div>
                        </div>
                    </div>
                `;
                
                multiLabelContainer.appendChild(labelItem);
            }
        }
        
        // Etiket oluşturma ve yazdırma fonksiyonu
        function generateLabelAndPrint(barcode, model, color, size) {
            // Önce etiket boyutlarını ayarla
            updateCustomFields();
            
            const paperType = document.getElementById('paper-type').value;
            const isMultiLabel = paperType === 'a4';
            
            // Tekli etiket elementleri
            const qrCodeImage = document.getElementById('qr-code-image');
            const barcodeTextUnderQr = document.getElementById('barcode-text-under-qr');
            const modelValue = document.getElementById('model-value');
            const colorValue = document.getElementById('color-value');
            const sizeValue = document.getElementById('size-value');

            // Önceki görsel yükleme olay dinleyicilerini temizle
            const cleanUpListeners = () => {
                qrCodeImage.removeEventListener('load', onQrLoad);
                qrCodeImage.removeEventListener('error', onQrError);
            };

            const onQrLoad = () => {
                console.log("QR Kod yüklendi, yazdırma başlatılıyor...");
                cleanUpListeners();
                
                // Çoklu etiket modunda, klonları güncelle
                if (isMultiLabel) {
                    updateMultiLabels(barcode, model, color, size, qrCodeImage.src);
                }
                
                // Kısa bir gecikme ekleyerek tüm QR kodların yüklenmesini bekle
                setTimeout(() => {
                    window.print();
                }, 500);
            };

            const onQrError = () => {
                console.error("QR Kod yüklenirken hata oluştu.");
                cleanUpListeners();
                alert("QR Kod görseli yüklenirken hata oluştu. Yazdırma yapılamıyor.");
            };

            // Görsel yükleme ve hata olay dinleyicilerini kur
            qrCodeImage.addEventListener('load', onQrLoad);
            qrCodeImage.addEventListener('error', onQrError);

            // QR Altındaki Barkod değerini güncelle
            barcodeTextUnderQr.textContent = barcode;

            // Ürün bilgilerini güncelle
            modelValue.textContent = model;
            colorValue.textContent = color;
            sizeValue.textContent = size;

            // Backend'den QR kod görselini çek
            fetch(`/generate_qr?barcode=${encodeURIComponent(barcode)}`)
                .then(response => {
                    if (!response.ok) {
                        return response.text().then(text => { throw new Error(`HTTP error! status: ${response.status}, message: ${text}`); });
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.success) {
                        qrCodeImage.src = data.qr_code_path;
                        qrCodeImage.alt = 'QR Kod: ' + barcode;
                    } else {
                        alert('QR Kod oluşturma başarısız: ' + (data.message || 'Bilinmeyen hata'));
                        qrCodeImage.src = 'https://via.placeholder.com/100?text=Hata';
                        qrCodeImage.alt = 'QR Kod Hatası';
                    }
                })
                .catch(err => {
                    console.error('QR Kod oluşturulurken fetch hatası:', err);
                    alert('QR Kod oluşturulurken bir ağ hatası oluştu. Detaylar konsolda.');
                    qrCodeImage.src = 'https://via.placeholder.com/100?text=Ağ+Hata';
                    qrCodeImage.alt = 'QR Kod Ağ Hatası';
                });
        }
        
        // Çoklu etiketleri güncelle
        function updateMultiLabels(barcode, model, color, size, qrImageSrc) {
            const labelClones = document.querySelectorAll('.label-item');
            
            labelClones.forEach(label => {
                // QR kod görselini güncelle
                const qrImg = label.querySelector('.qr-code-clone');
                if (qrImg) {
                    qrImg.src = qrImageSrc;
                    qrImg.alt = 'QR Kod: ' + barcode;
                }
                
                // Barkod metnini güncelle
                const barcodeText = label.querySelector('.barcode-clone');
                if (barcodeText) {
                    barcodeText.textContent = barcode;
                }
                
                // Ürün bilgilerini güncelle
                const modelClone = label.querySelector('.model-clone');
                const colorClone = label.querySelector('.color-clone');
                const sizeClone = label.querySelector('.size-clone');
                
                if (modelClone) modelClone.textContent = model;
                if (colorClone) colorClone.textContent = color;
                if (sizeClone) sizeClone.textContent = size;
            });
        }

        // Form butonuna basınca çalışacak fonksiyon
        function generateAndPrintFromForm() {
            const barcode = document.getElementById('barcode-input').value;
            const model = document.getElementById('model-input').value;
            const color = document.getElementById('color-input').value;
            const size = document.getElementById('size-input').value;

            if (!barcode || !model || !color || !size) {
                alert("Lütfen tüm alanları doldurun.");
                return;
            }

            // Formdan alınan değerlerle etiket oluştur ve yazdırma işlemini başlat
            generateLabelAndPrint(barcode, model, color, size);
        }
    </script>

</body>

</html>